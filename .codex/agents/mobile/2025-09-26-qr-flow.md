# Mobile QR Flow - Session Notes (2025-09-26)

## Decisions
- Implemented public route group `app/(public)/qr` so middleware can skip auth for customer-facing pages.
- Reused `useMenuCatalog` for catalog cache and built `useQrTable` + `useQrCart` to fetch table data and persist cart per table in localStorage.
- Floating cart drawer (`QrCartSheet`) keeps summary bar always visible, blocks submission when items are unavailable, and surfaces success state with order id + staff notice.
- Added `getQrUrl(tableId, { origin })` helper to `lib/server/table-store.ts` and stored `qrcodeUrl` for each mock table so ops teams can print/share stable QR links.

## Accessibility & UX
- Tap targets >= 48px, sticky header with quick refresh, focus-visible styles on category pills, drawer handles keyboard focus when opened.
- Error states cover: table not found, offline (toast), and menu failures; skeletons for initial load.
- Dark mode validated visually; typography follows existing Tailwind tokens.

## Performance
- Pending Lighthouse run on Simulated Fast 3G; target LCP < 2s. Run in Chrome DevTools once environment is available and update docs with the score.

## Follow-ups
- Consider analytics events for cart actions once telemetry pipeline is ready.
- Localize copy (EN) once translation strings are defined.
- When real backend arrives, revisit cart persistence strategy (server session vs localStorage).
